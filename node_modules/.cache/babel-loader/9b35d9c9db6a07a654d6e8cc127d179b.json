{"ast":null,"code":"import _toConsumableArray from\"C:/Users/Augusto/Desktop/PI Food - Frontend/client/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";import _defineProperty from\"C:/Users/Augusto/Desktop/PI Food - Frontend/client/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";import _objectSpread from\"C:/Users/Augusto/Desktop/PI Food - Frontend/client/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _slicedToArray from\"C:/Users/Augusto/Desktop/PI Food - Frontend/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useEffect,useState}from\"react\";import{useDispatch,useSelector}from\"react-redux\";import{useHistory}from\"react-router-dom\";import{getDiets,postRecipe}from\"../../reducer/actions\";import CreateBanner from\"../Banners/CreateBanner\";import NavBar from\"../NavBar/NavBar\";import s from'./CreateRecipe.module.css';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export default function CreateRecipe(){var dispatch=useDispatch();var history=useHistory();var diets=useSelector(function(state){return state.diets;});var _useState=useState({}),_useState2=_slicedToArray(_useState,2),errors=_useState2[0],setErrors=_useState2[1];var allRecipes=useSelector(function(state){return state.recipes;});var _useState3=useState({name:'',summary:'',image:'',healthScore:'',steps:'',diets:[]}),_useState4=_slicedToArray(_useState3,2),form=_useState4[0],setForm=_useState4[1];useEffect(function(){dispatch(getDiets());},[dispatch]);function validate(form){var errors={};if(!form.name)errors.name='Name of recipe is required';if(form.name&&!/^[a-zA-Z\" \"]*$/.test(form.name))errors.name='The name cannot contain numbers or special characters';if(allRecipes.find(function(e){return e.name===form.name;}))errors.name='We already have a recipe with that name';if(!form.summary)errors.summary='Summary of recipe is required';if(form.healthScore<0||form.healthScore>100)errors.healthScore='The Health Score must be between 0 and 100';if(isNaN(form.healthScore))errors.healthScore='The Health Score must be a number';return errors;};function handleChange(e){setForm(_objectSpread(_objectSpread({},form),{},_defineProperty({},e.target.name,e.target.value)));setErrors(validate(_objectSpread(_objectSpread({},form),{},_defineProperty({},e.target.name,e.target.value))));};function handleSelect(e){setForm(_objectSpread(_objectSpread({},form),{},{diets:[].concat(_toConsumableArray(form.diets),[e.target.value])}));}function handleSubmit(e){e.preventDefault(e);dispatch(postRecipe(form));setForm({name:'',summary:'',image:'',healthScore:'',steps:'',diets:[]});alert('The recipe was created successfully');history.push('/home');};function handleReset(e){setForm(_objectSpread(_objectSpread({},form),{},{diets:[]}));}return/*#__PURE__*/_jsxs(\"div\",{children:[console.log(diets),/*#__PURE__*/_jsx(NavBar,{}),/*#__PURE__*/_jsx(CreateBanner,{}),/*#__PURE__*/_jsxs(\"form\",{className:s.formcontainer,onSubmit:function onSubmit(e){return handleSubmit(e);},children:[/*#__PURE__*/_jsx(\"label\",{className:s.labels,children:\"Name:\"}),/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"input\",{className:s.input,type:\"text\",value:form.name,name:\"name\",onChange:function onChange(e){return handleChange(e);}})}),/*#__PURE__*/_jsx(\"label\",{className:s.labels,children:\"Image:\"}),/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"input\",{className:s.input,type:\"text\",value:form.image,name:\"image\",onChange:function onChange(e){return handleChange(e);}})}),/*#__PURE__*/_jsx(\"label\",{className:s.labels,children:\"Health Score:\"}),/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"input\",{className:s.input,type:\"number\",value:form.healthScore,name:\"healthScore\",onChange:function onChange(e){return handleChange(e);}})}),/*#__PURE__*/_jsx(\"label\",{className:s.labels,children:\"Diets:\"}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"select\",{className:s.select,onChange:function onChange(e){return handleSelect(e);},children:diets.map(function(e){return/*#__PURE__*/_jsx(\"option\",{className:s.option,value:e.name,children:e.name[0].toUpperCase()+e.name.substring(1)});})}),/*#__PURE__*/_jsx(\"button\",{className:s.resetbtn,type:\"button\",onClick:handleReset,children:\"Reset\"})]}),/*#__PURE__*/_jsx(\"h4\",{className:s.dietsdetail,children:form.diets.map(function(e){return e[0].toUpperCase()+e.substring(1)+', ';})})]}),/*#__PURE__*/_jsx(\"label\",{className:s.labels,children:\"Summary:\"}),/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"textarea\",{className:s.textarea,type:\"text\",value:form.summary,name:\"summary\",onChange:function onChange(e){return handleChange(e);}})}),/*#__PURE__*/_jsx(\"label\",{className:s.labels,children:\"Steps:\"}),/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"textarea\",{className:s.textarea,type:\"text\",value:form.steps,name:\"steps\",onChange:function onChange(e){return handleChange(e);}})}),/*#__PURE__*/_jsx(\"button\",{className:s.submitbtn,disabled:form.name===''||errors.name||errors.summary||errors.healthScore,children:\"Submit\"}),/*#__PURE__*/_jsxs(\"div\",{children:[(errors.name||errors.summary||errors.healthScore)&&/*#__PURE__*/_jsx(\"h4\",{className:s.labels,children:\"Errors:\"}),/*#__PURE__*/_jsxs(\"div\",{className:s.errors,children:[errors.name&&/*#__PURE__*/_jsx(\"h4\",{children:errors.name}),errors.summary&&/*#__PURE__*/_jsx(\"h4\",{children:errors.summary}),errors.healthScore&&/*#__PURE__*/_jsx(\"h4\",{children:errors.healthScore})]})]})]})]});}","map":{"version":3,"names":["React","useEffect","useState","useDispatch","useSelector","useHistory","getDiets","postRecipe","CreateBanner","NavBar","s","CreateRecipe","dispatch","history","diets","state","errors","setErrors","allRecipes","recipes","name","summary","image","healthScore","steps","form","setForm","validate","test","find","e","isNaN","handleChange","target","value","handleSelect","handleSubmit","preventDefault","alert","push","handleReset","console","log","formcontainer","labels","input","select","map","option","toUpperCase","substring","resetbtn","dietsdetail","textarea","submitbtn"],"sources":["C:/Users/Augusto/Desktop/PI Food - Frontend/client/src/components/CreateRecipe/CreateRecipe.jsx"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport { useHistory } from \"react-router-dom\";\r\nimport { getDiets, postRecipe } from \"../../reducer/actions\";\r\nimport CreateBanner from \"../Banners/CreateBanner\";\r\nimport NavBar from \"../NavBar/NavBar\"\r\nimport s from './CreateRecipe.module.css'\r\n\r\n\r\n\r\n\r\nexport default function CreateRecipe() {\r\n    const dispatch = useDispatch();\r\n    const history = useHistory()\r\n    const diets = useSelector((state) => state.diets);\r\n    const [errors, setErrors] = useState({})\r\n    const allRecipes = useSelector((state) => state.recipes);\r\n\r\n    const [form, setForm] = useState({\r\n        name: '',\r\n        summary: '',\r\n        image: '',\r\n        healthScore: '',\r\n        steps: '',\r\n        diets: []\r\n    });\r\n\r\n\r\n    useEffect(() => {\r\n        dispatch(getDiets())\r\n    }, [dispatch]);\r\n\r\n\r\n\r\n    function validate(form) {\r\n        let errors = {};\r\n        if (!form.name) errors.name = 'Name of recipe is required';\r\n        if (form.name && !/^[a-zA-Z\" \"]*$/.test(form.name)) errors.name = 'The name cannot contain numbers or special characters';\r\n        if (allRecipes.find(e => e.name === form.name)) errors.name = ('We already have a recipe with that name')\r\n        if (!form.summary) errors.summary = 'Summary of recipe is required';\r\n        if (form.healthScore < 0 || form.healthScore > 100) errors.healthScore = ('The Health Score must be between 0 and 100');\r\n        if (isNaN(form.healthScore)) errors.healthScore = ('The Health Score must be a number');\r\n\r\n        return errors\r\n    };\r\n\r\n    function handleChange(e) {\r\n        setForm({\r\n            ...form,\r\n            [e.target.name]: e.target.value\r\n        })\r\n        setErrors(validate({\r\n            ...form,\r\n            [e.target.name]: e.target.value\r\n        }))\r\n    };\r\n\r\n\r\n    function handleSelect(e) {\r\n        setForm({\r\n            ...form,\r\n            diets: [...form.diets, e.target.value]\r\n        })\r\n\r\n    }\r\n\r\n\r\n    function handleSubmit(e) {\r\n        e.preventDefault(e);\r\n        dispatch(postRecipe(form));\r\n        setForm({\r\n            name: '',\r\n            summary: '',\r\n            image: '',\r\n            healthScore: '',\r\n            steps: '',\r\n            diets: []\r\n        })\r\n        alert('The recipe was created successfully');\r\n\r\n        history.push('/home')\r\n\r\n    };\r\n\r\n    function handleReset(e) {\r\n        setForm({\r\n            ...form,\r\n            diets: []\r\n        })\r\n    }\r\n\r\n\r\n    return (\r\n\r\n        <div>\r\n            {console.log(diets)}\r\n            <NavBar />\r\n            <CreateBanner />\r\n\r\n            <form className={s.formcontainer} onSubmit={(e) => handleSubmit(e)}>\r\n                <label className={s.labels}>Name:</label>\r\n\r\n                <div>\r\n                    <input  className={s.input} type=\"text\" value={form.name} name='name' onChange={(e) => handleChange(e)} />\r\n                </div>\r\n\r\n                <label className={s.labels}>Image:</label>\r\n                <div>\r\n                    <input  className={s.input} type=\"text\" value={form.image} name='image' onChange={(e) => handleChange(e)} />\r\n                </div>\r\n\r\n                <label className={s.labels}>Health Score:</label>\r\n                <div>\r\n                    <input className={s.input} type=\"number\" value={form.healthScore} name='healthScore' onChange={(e) => handleChange(e)} />\r\n                </div>\r\n\r\n                <label className={s.labels}>Diets:</label>\r\n                <div>\r\n                    <div>\r\n                    <select className={s.select} onChange={(e) => handleSelect(e)}>\r\n                        {\r\n                            diets.map((e) => {\r\n                                return (\r\n                                    <option  className={s.option} value={e.name}>{e.name[0].toUpperCase() + e.name.substring(1)}</option>\r\n                                )\r\n                            })\r\n                        }\r\n                    </select>\r\n                    <button  className={s.resetbtn} type=\"button\" onClick={handleReset}>Reset</button>\r\n                    </div>\r\n                    <h4 className={s.dietsdetail}>{form.diets.map(e => e[0].toUpperCase() + e.substring(1) + ', ')}</h4>\r\n                </div>\r\n\r\n                <label className={s.labels}>Summary:</label>\r\n                <div>\r\n                    <textarea className={s.textarea} type=\"text\" value={form.summary} name='summary' onChange={(e) => handleChange(e)} />\r\n                </div>\r\n\r\n                <label className={s.labels} >Steps:</label>\r\n                <div>\r\n                    <textarea className={s.textarea} type=\"text\" value={form.steps} name='steps' onChange={(e) => handleChange(e)} />\r\n                </div>\r\n\r\n                \r\n\r\n                <button className={s.submitbtn} disabled={form.name === '' || errors.name || errors.summary || errors.healthScore}>\r\n                    Submit\r\n                </button>\r\n\r\n                <div>\r\n                    {(errors.name || errors.summary ||errors.healthScore) && <h4 className={s.labels}>Errors:</h4>}\r\n\r\n                    <div className={s.errors}>\r\n                        {errors.name && (<h4>{errors.name}</h4>)}\r\n                        {errors.summary && (<h4>{errors.summary}</h4>)}\r\n                        {errors.healthScore && (<h4>{errors.healthScore}</h4>)}\r\n                    </div>\r\n                </div>\r\n\r\n            </form>\r\n        </div>\r\n    )\r\n}\r\n\r\n\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}